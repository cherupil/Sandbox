(()=>{var $=`attribute vec4 aPosition;

uniform mat4 uMatrix;
uniform float uTime;

void main() {
	vec4 position = uMatrix * aPosition;
	position.x += sin(position.y * 24.0 + uTime) / 160.0;
	position.y += sin(position.z * 40.0 + uTime) / 160.0;
	position.z += sin(position.x * 32.0 + uTime) / 160.0;
	gl_Position = position;
}`;var tt=`precision mediump float;

void main() {
	vec3 outer = vec3(0.5, 0.0625, 0.125);
	vec3 inner = vec3(0.125, 0.015625, 0.03125);
	vec2 center = vec2(0.5);
	vec2 st = gl_FragCoord.xy/vec2(1890.0, 1890.0);
	float dist = distance(st, center) * 8.0;
	vec3 mixed = mix(outer, inner, dist);
	gl_FragColor = vec4(mixed, 1.0);
}`;var st=`attribute vec4 aPosition;

uniform mat4 uMatrix;
uniform float uTime;

void main() {
	vec4 position = uMatrix * aPosition;
	position.x += sin(position.y * 24.0 + uTime) / 160.0;
	position.y += sin(position.z * 40.0 + uTime) / 160.0;
	position.z += sin(position.x * 32.0 + uTime) / 160.0;
	gl_Position = position;
}`;var et=`precision mediump float;

void main() {
	float sideLength = 0.25;
	float diagonal = sqrt(pow(sideLength, 2.0) + pow(sideLength, 2.0));
	float total = sqrt(pow(diagonal, 2.0) + pow(diagonal, 2.0));
	float diff = ((total / 2.0) + gl_FragCoord.z) / total;
	vec3 front = vec3(2.0 - diff, 1.25 - diff, 1.5 - diff);
	vec3 back = vec3(0.0, 0.0, 0.0);
	vec3 final = mix(back, front, 2.25 - diff);
	vec3 depth = vec3(pow(1.9 - diff, 8.0));
	gl_FragColor = vec4(final + depth, 1.0);
	//gl_FragColor = vec4(final, 1.0);
}`;var G=class{constructor(t){this.gl=t.getContext("webgl",{powerPreference:"high-performance"}),this.resize=this.resize.bind(this),this.render=this.render.bind(this),this.pixelRatio=2}setPixelRatio(t){this.pixelRatio=t}resize(){let t=this.gl.canvas.clientWidth*this.pixelRatio,s=this.gl.canvas.clientHeight*this.pixelRatio;return this.gl.canvas.width*this.pixel!==t||this.gl.canvas.height*this.pixelRatio!==s?(this.gl.canvas.width=t,this.gl.canvas.height=s,this.gl.viewport(0,0,this.gl.canvas.width,this.gl.canvas.height),!0):!1}render(t,s){this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT),this.gl.enable(this.gl.CULL_FACE),this.gl.enable(this.gl.DEPTH_TEST);let o=null,i=null;for(let r of t.objects){r.setProjectionMatrix(s.matrix);let c=!1;if(r.shader.program!==o&&(this.gl.useProgram(r.shader.program),o=r.shader.program,c=!0),c||r.geometry.attributes!=i){for(let a in r.geometry.attributes){this.gl.enableVertexAttribArray(r.geometry.attributes[a].location),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,r.geometry.attributes[a].buffer);let f=r.geometry.attributes[a].size,m=this.gl.FLOAT,p=!1,x=0,y=0;this.gl.vertexAttribPointer(r.geometry.attributes[a].location,f,m,p,x,y)}i=r.geometry.attributes}for(let a in r.shader.uniforms)if(a==="uMatrix")this.gl.uniformMatrix4fv(r.shader.uniforms[a].location,!1,r.projectionMatrix);else switch(r.shader.uniforms[a].type){case"1f":this.gl.uniform1f(r.shader.uniforms[a].location,r.shader.uniforms[a].value);break;case"2f":this.gl.uniform2f(r.shader.uniforms[a].location,r.shader.uniforms[a].value[0],r.shader.uniforms[a].value[1]);break;case"3f":this.gl.uniform2f(r.shader.uniforms[a].location,r.shader.uniforms[a].value[0],r.shader.uniforms[a].value[1],r.shader.uniforms[a].value[2]);break;case"mat3":this.gl.uniformMatrix3fv(r.shader.uniforms[a].location,!1,r.shader.uniforms[a].value);break;case"mat4":this.gl.uniformMatrix4fv(r.shader.uniforms[a].location,!1,r.shader.uniforms[a].value);break;default:break}let n=this.gl[r.drawMode],u=0,l=r.geometry.attributes.aPosition.count;this.gl.drawArrays(n,u,l)}}};var O=class{constructor(t,s,o,i,r,c){this.left=t,this.right=s,this.bottom=o,this.top=i,this.near=r,this.far=c,this._createMatrix()}_createMatrix(){this.matrix=[2/(this.right-this.left),0,0,0,0,2/(this.top-this.bottom),0,0,0,0,-2/(this.far-this.near),0,-(this.right+this.left)/(this.right-this.left),-(this.top+this.bottom)/(this.top-this.bottom),-(this.far+this.near)/(this.far-this.near),1]}setLeft(t){this.left=t,this._createMatrix()}setRight(t){this.right=t,this._createMatrix()}setBottom(t){this.bottom=t,this._createMatrix()}setTop(t){this.top=t,this._createMatrix()}setNear(t){this.near=t,this._createMatrix()}setFar(t){this.far=t,this._createMatrix()}};var Y=class{constructor(){this.objects=[]}add(t){this.objects.push(t),this.objects.sort((s,o)=>{let i=s.geometry.id-o.geometry.id;return i||s.shader.id-o.shader.id})}};var d=class{static multiply(t,s){let o=s[0*4+0],i=s[0*4+1],r=s[0*4+2],c=s[0*4+3],n=s[1*4+0],u=s[1*4+1],l=s[1*4+2],a=s[1*4+3],f=s[2*4+0],m=s[2*4+1],p=s[2*4+2],x=s[2*4+3],y=s[3*4+0],b=s[3*4+1],R=s[3*4+2],z=s[3*4+3],T=t[0*4+0],g=t[0*4+1],M=t[0*4+2],v=t[0*4+3],e=t[1*4+0],w=t[1*4+1],F=t[1*4+2],j=t[1*4+3],C=t[2*4+0],E=t[2*4+1],I=t[2*4+2],B=t[2*4+3],L=t[3*4+0],U=t[3*4+1],k=t[3*4+2],D=t[3*4+3];return[o*T+i*e+r*C+c*L,o*g+i*w+r*E+c*U,o*M+i*F+r*I+c*k,o*v+i*j+r*B+c*D,n*T+u*e+l*C+a*L,n*g+u*w+l*E+a*U,n*M+u*F+l*I+a*k,n*v+u*j+l*B+a*D,f*T+m*e+p*C+x*L,f*g+m*w+p*E+x*U,f*M+m*F+p*I+x*k,f*v+m*j+p*B+x*D,y*T+b*e+R*C+z*L,y*g+b*w+R*E+z*U,y*M+b*F+R*I+z*k,y*v+b*j+R*B+z*D]}static identity(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}static translate(t,s,o){return[1,0,0,0,0,1,0,0,0,0,1,0,t,s,o,1]}static rotateX(t){let s=t*Math.PI/180,o=Math.cos(s),i=Math.sin(s);return[1,0,0,0,0,o,i,0,0,-i,o,0,0,0,0,1]}static rotateY(t){let s=t*Math.PI/180,o=Math.cos(s),i=Math.sin(s);return[o,0,-i,0,0,1,0,0,i,0,o,0,0,0,0,1]}static rotateZ(t){let s=t*Math.PI/180,o=Math.cos(s),i=Math.sin(s);return[o,i,0,0,-i,o,0,0,0,0,1,0,0,0,0,1]}static scale(t,s,o){return[t,0,0,0,0,s,0,0,0,0,o,0,0,0,0,1]}};var H=class{constructor(t,s){this.geometry=t,this.shader=s,this.position={x:0,y:0,z:0},this.rotation={x:0,y:0,z:0},this.scale={x:1,y:1,z:1},this.localMatrix=d.identity(),this._setAttributeData(),this._setUniformData(),this._setDrawMode()}_setAttributeData(){for(let t in this.geometry.attributes)this.geometry.attributes[t].location=this.shader.gl.getAttribLocation(this.shader.program,this.geometry.attributes[t].name),this.geometry.attributes[t].buffer=this.shader.gl.createBuffer(),this.shader.gl.bindBuffer(this.shader.gl.ARRAY_BUFFER,this.geometry.attributes[t].buffer),this.shader.gl.bufferData(this.shader.gl.ARRAY_BUFFER,this.geometry.attributes[t].data,this.shader.gl.STATIC_DRAW)}_setUniformData(){if(this.shader.uniforms)for(let t in this.shader.uniforms)this.shader.uniforms[t].location=this.shader.gl.getUniformLocation(this.shader.program,this.shader.uniforms[t].name)}_setDrawMode(){this.drawMode=this.geometry.type??"TRIANGLES"}_recalculateModelMatrix(){let t=d.identity(),s=d.translate(this.position.x,this.position.y,this.position.z),o=d.rotateX(this.rotation.x),i=d.rotateY(this.rotation.y),r=d.rotateZ(this.rotation.z),c=d.scale(this.scale.x,this.scale.y,this.scale.z),n=d.multiply(t,s);n=d.multiply(n,o),n=d.multiply(n,i),n=d.multiply(n,r),n=d.multiply(n,c),this.localMatrix=n}setProjectionMatrix(t){this.projectionMatrix=d.multiply(t,this.localMatrix)}setPosition(t,s,o){this.position={x:t,y:s,z:o},this._recalculateModelMatrix()}setRotationX(t){this.rotation.x=t,this._recalculateModelMatrix()}setRotationY(t){this.rotation.y=t,this._recalculateModelMatrix()}setRotationZ(t){this.rotation.z=t,this._recalculateModelMatrix()}setScale(t,s,o){this.scale={x:t,y:s,z:o},this._recalculateModelMatrix()}};var lt=0,P=class{constructor(t){this.id=lt++,this.attributes={},this.setAttribute("aPosition",new Float32Array(t),3)}setAttribute(t,s,o){this.attributes[t]={name:t,data:s,size:o,count:s.length/o}}};var V=class extends P{constructor(t,s,o,i){let r=[],c=t/o,n=s/i;for(let u=0;u<i;u++)for(let l=0;l<o;l++){let a=l*c-t/2,f=u*n-s/2,m=0,p=(l+1)*c-t/2,x=f,y=a,b=(u+1)*n-s/2,R=a,z=b,T=p,g=x,M=p,v=b;r.push(a,f,m,p,x,m,y,b,m,R,z,m,T,g,m,M,v,m)}super(r)}};var X=class extends P{constructor(t,s){let o=[];o.push(0,0,0);for(let i=0;i<s;i++){let r=Math.cos(i*Math.PI/(s/2))*t,c=Math.sin(i*Math.PI/(s/2))*t,n=0;o.push(r,c,n)}o.push(Math.cos(0)*t,Math.sin(0)*t,0);super(o);this.type="TRIANGLE_FAN"}};var N=class extends P{constructor(t,s,o,i,r,c){let n=[];u("x","y","z",t,s,o,i,r,"front"),u("x","y","z",t,s,-o,i,r,"back"),u("x","z","y",t,o,s,i,c,"back"),u("x","z","y",t,o,-s,i,c,"front"),u("z","y","x",o,s,t,c,r,"back"),u("z","y","x",o,s,-t,c,r,"front");function u(l,a,f,m,p,x,y,b,R){let z=m/y,T=p/b,g=x/2;for(let M=0;M<b;M++)for(let v=0;v<y;v++){let e={};e[l]=[],e[a]=[],e[f]=[];let w=v*z-m/2,F=M*T-p/2,j=(v+1)*z-m/2,C=(M+1)*T-p/2;e[l].push(w),e[a].push(F),e[f].push(g),e[l].push(j),e[a].push(F),e[f].push(g),e[l].push(w),e[a].push(C),e[f].push(g),e[l].push(w),e[a].push(C),e[f].push(g),e[l].push(j),e[a].push(F),e[f].push(g),e[l].push(j),e[a].push(C),e[f].push(g),R==="front"?n.push(e.x[0],e.y[0],e.z[0],e.x[1],e.y[1],e.z[1],e.x[2],e.y[2],e.z[2],e.x[3],e.y[3],e.z[3],e.x[4],e.y[4],e.z[4],e.x[5],e.y[5],e.z[5]):R==="back"&&n.push(e.x[0],e.y[0],e.z[0],e.x[2],e.y[2],e.z[2],e.x[1],e.y[1],e.z[1],e.x[3],e.y[3],e.z[3],e.x[5],e.y[5],e.z[5],e.x[4],e.y[4],e.z[4])}}super(n)}};var ut=0,W=class{constructor(t,s,o){let i=this._createShader(t,t.VERTEX_SHADER,s),r=this._createShader(t,t.FRAGMENT_SHADER,o);this.gl=t,this.id=ut++,this.program=this._createProgram(t,i,r),this.uniforms={uMatrix:{name:"uMatrix",value:null,type:"mat4"}}}_createShader(t,s,o){let i=t.createShader(s);if(t.shaderSource(i,o),t.compileShader(i),t.getShaderParameter(i,t.COMPILE_STATUS))return i;console.log(t.getShaderInfoLog(i)),t.deleteShader(i)}_createProgram(t,s,o){let i=t.createProgram();if(t.attachShader(i,s),t.attachShader(i,o),t.linkProgram(i),t.getProgramParameter(i,t.LINK_STATUS))return i;console.log(t.getProgramInfoLog(i)),t.deleteProgram(i)}setUniform(t,s,o){this.uniforms[t]={name:t,value:s,type:o}}};var h=class{static createColor(t,s,o){return{r:t/255,g:s/255,b:o/255}}};h.Renderer=G;h.Orthographic=O;h.Volume=Y;h.Mesh=H;h.Geometry=P;h.Plane=V;h.Circle=X;h.Cube=N;h.Program=W;var S=window.innerWidth/window.innerHeight,ft=document.getElementById("webgl"),A=new h.Renderer(ft);A.setPixelRatio(1);var mt=new h.Circle(.25,64),ot=new h.Program(A.gl,$,tt);ot.setUniform("uTime",0,"1f");var Z=new h.Mesh(mt,ot);Z.setPosition(0,0,.3);var dt=new h.Cube(.5,.5,.5,64,64,64),it=new h.Program(A.gl,st,et);it.setUniform("uTime",0,"1f");var q=new h.Mesh(dt,it);q.setRotationX(37.5);q.setRotationY(45);var K=new h.Volume;K.add(q);K.add(Z);var J=new h.Orthographic(-1*S,1*S,-1,1,-1,1);A.resize();A.gl.clearColor(0,0,0,0);var Q=0,rt=()=>{A.render(K,J),Q+=.1,Z.shader.uniforms.uTime.value=Q,q.shader.uniforms.uTime.value=Q,window.requestAnimationFrame(rt)};window.addEventListener("resize",()=>{A.resize()&&(S=A.gl.canvas.width/A.gl.canvas.height,J.setLeft(-1*S),J.setRight(1*S))});window.requestAnimationFrame(rt);})();
